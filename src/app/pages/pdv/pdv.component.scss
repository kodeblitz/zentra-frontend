// PDV: estilos mínimos (layout y responsive con Tailwind/PrimeUI en el template)
// Solo overrides necesarios para que p-card content sea flex y ocupe el espacio correcto

:host {
    display: flex;
    flex-direction: column;
    flex: 1;
    min-height: 0;
}

// Paso 1: limitar altura del grid para que no empuje el botón fuera de la vista
.pdv-paso1-grid {
    max-height: calc(100vh - 8rem);
    min-height: 20rem;
}

// Carrito paso 1: lista con scroll para que el botón "Continuar" quede siempre visible
.pdv-carrito-contenido {
    display: flex;
    flex-direction: column;
    min-height: 0;
}
.pdv-carrito-lista {
    // Altura acotada para que resumen + botón quepan siempre en pantalla
    max-height: min(38vh, 22rem);
}

// Títulos del PDV siempre legibles: header con texto blanco; tabs inactivos con texto claro
.pdv-header {
    color: #fff;
    h1 { color: #fff !important; }
}
.pdv-header .pdv-tabs button {
    color: rgba(255, 255, 255, 0.95);
}
.pdv-header .pdv-tabs button.bg-white {
    color: var(--p-primary-color);
}
:host ::ng-deep .p-card .p-card-header .p-card-title,
:host ::ng-deep .p-card .p-card-header {
    color: var(--p-text-color);
}
:host-context(.app-dark) ::ng-deep .p-card .p-card-header .p-card-title,
:host-context(.app-dark) ::ng-deep .p-card .p-card-header {
    color: rgba(255, 255, 255, 0.87);
}

// Asegurar que el contenido del card sea flex para scroll y distribución
:host ::ng-deep .p-card {
    display: flex;
    flex-direction: column;
    height: 100%;
    .p-card-body {
        flex: 1;
        min-height: 0;
        display: flex;
        flex-direction: column;
    }
    .p-card-content {
        flex: 1;
        min-height: 0;
        display: flex;
        flex-direction: column;
        overflow: hidden;
    }
}

// Autocomplete del cliente que ocupe espacio disponible
:host ::ng-deep .p-select.p-autocomplete {
    flex: 1;
    min-width: 0;
}

// Línea de alquiler: estructura clara y espacio para montos grandes
.pdv-linea-alquiler {
    .pdv-dias-input {
        min-width: 6rem;
    }
}
.pdv-monto-final-wrap {
    min-width: 10rem;
    .pdv-monto-final-input.p-inputnumber {
        min-width: 8rem;
        width: auto;
        flex: 1;
        max-width: 12rem;
    }
}
:host ::ng-deep .pdv-monto-final-input.p-inputnumber {
    .p-inputnumber-input {
        min-width: 6rem;
        text-align: right;
    }
}
:host ::ng-deep .pdv-dias-input.p-inputnumber {
    min-width: 6rem;
}

// Tema oscuro: tarjetas de ítems del pedido actual con fondo oscuro y bordes visibles
:host-context(.app-dark) ::ng-deep .pdv-line-item {
    background-color: var(--p-surface-800, #2d2d2d) !important;
    border: 1px solid var(--p-surface-600, rgba(255, 255, 255, 0.12));
}
:host-context(.app-dark) ::ng-deep .pdv-line-item:hover {
    background-color: var(--p-surface-700, #383838) !important;
}
:host-context(.app-dark) ::ng-deep .pdv-line-item .pdv-line-item-promo,
:host-context(.app-dark) ::ng-deep .pdv-pedido-resumen {
    border-color: var(--p-surface-600, rgba(255, 255, 255, 0.12)) !important;
}

// Descuento general: porcentaje y monto en líneas separadas para que siempre se vean
.pdv-descuento-general {
    gap: 0.5rem;
}
:host ::ng-deep .pdv-descuento-input.p-inputnumber {
    min-width: 8rem;
    width: 8rem;
    flex-shrink: 0;
    .p-inputnumber-input {
        text-align: right;
        width: 100%;
        min-width: 3rem;
    }
}

// Promo en línea: inputs alineados y legibles
.pdv-promo-field {
    min-width: 0;
}
:host ::ng-deep .pdv-promo-pct.p-inputnumber {
    min-width: 5rem;
    width: 5rem;
    flex-shrink: 0;
    .p-inputnumber-input {
        text-align: right;
        width: 100%;
    }
}
:host ::ng-deep .pdv-promo-monto.p-inputnumber {
    min-width: 8rem;
    width: 8rem;
    flex-shrink: 0;
    .p-inputnumber-input {
        text-align: right;
        width: 100%;
    }
}

// Botones principales del PDV: hover consistente (evitar parpadeo o contraste malo en tema oscuro)
:host ::ng-deep .p-button.p-button-primary {
    transition: background-color 0.2s, filter 0.2s, box-shadow 0.2s;
    &:hover:not(:disabled) {
        filter: brightness(1.08);
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
    }
}
:host ::ng-deep .p-button.p-button-secondary.p-button-outlined {
    transition: background-color 0.2s, border-color 0.2s, color 0.2s;
    &:hover:not(:disabled) {
        background-color: rgba(255, 255, 255, 0.06);
    }
}
:host-context(.app-dark) ::ng-deep .p-button.p-button-primary:hover:not(:disabled) {
    filter: brightness(1.15);
    box-shadow: 0 2px 12px rgba(0, 0, 0, 0.4);
}

// Alerta visual de stock: rojo frío (sin stock), naranja amarillento (1-14), verde (≥15)
.pdv-stock-sin {
    border: 2px solid #b91c1c !important; // rojo más intenso, sin tono naranja
    &:hover { border-color: #991b1b !important; }
}
.pdv-stock-bajo {
    border: 2px solid #d97706 !important; // ámbar/naranja amarillento (diferente al rojo)
    &:hover { border-color: #b45309 !important; }
}
.pdv-stock-ok {
    border: 2px solid #16a34a !important; // verde: al menos 15 unidades
    &:hover { border-color: #15803d !important; }
}
